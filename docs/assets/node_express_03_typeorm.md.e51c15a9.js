import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.395e6a84.js";const b=JSON.parse('{"title":"typeorn","description":"","frontmatter":{},"headers":[],"relativePath":"node/express/03_typeorm.md","filePath":"node/express/03_typeorm.md","lastUpdated":1686325478000}'),p={name:"node/express/03_typeorm.md"},e=l(`<h1 id="typeorn" tabindex="-1">typeorn <a class="header-anchor" href="#typeorn" aria-label="Permalink to &quot;typeorn&quot;">​</a></h1><h2 id="连接" tabindex="-1">连接 <a class="header-anchor" href="#连接" aria-label="Permalink to &quot;连接&quot;">​</a></h2><ul><li>创建一个数据源</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { DataSource } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;typeorm&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Table_User } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@/entity&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">database</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">DataSource</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#9ECBFF;">&quot;sqlite&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  database: </span><span style="color:#9ECBFF;">&quot;./db.sqlite&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  entities: [</span><span style="color:#9ECBFF;">&quot;./entity/**.ts&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">  synchronize: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">database.</span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">db</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  db.manager.</span><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;">(Table_User);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { DataSource } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;typeorm&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Table_User } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@/entity&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">database</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DataSource</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#032F62;">&quot;sqlite&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  database: </span><span style="color:#032F62;">&quot;./db.sqlite&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  entities: [</span><span style="color:#032F62;">&quot;./entity/**.ts&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">  synchronize: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">database.</span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">((</span><span style="color:#E36209;">db</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  db.manager.</span><span style="color:#6F42C1;">find</span><span style="color:#24292E;">(Table_User);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="实体" tabindex="-1">实体 <a class="header-anchor" href="#实体" aria-label="Permalink to &quot;实体&quot;">​</a></h2><ul><li>需要开启 TS Decorators 功能</li><li>本质一个用于映射到数据库表格的 TS 类</li></ul><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//启用TS装饰器</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;experimentalDecorators&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//允许类中属性不进行初始化</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;strictPropertyInitialization&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//启用TS装饰器</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;experimentalDecorators&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//允许类中属性不进行初始化</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;strictPropertyInitialization&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Entity, PrimaryGeneratedColumn, Column } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;typeorm&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">@</span><span style="color:#B392F0;">Entity</span><span style="color:#E1E4E8;">({ name: </span><span style="color:#9ECBFF;">&quot;Table_User&quot;</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  @</span><span style="color:#B392F0;">PrimaryGeneratedColumn</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;uuid&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">user_id</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  @</span><span style="color:#B392F0;">Column</span><span style="color:#E1E4E8;">({ type: </span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;">, length: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">user_name</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;default user_name&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  @</span><span style="color:#B392F0;">Column</span><span style="color:#E1E4E8;">({ type: </span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;">, length: </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">user_pwd</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;default user_pwd&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Entity, PrimaryGeneratedColumn, Column } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;typeorm&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#6F42C1;">Entity</span><span style="color:#24292E;">({ name: </span><span style="color:#032F62;">&quot;Table_User&quot;</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#6F42C1;">PrimaryGeneratedColumn</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;uuid&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">user_id</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#6F42C1;">Column</span><span style="color:#24292E;">({ type: </span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;">, length: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">user_name</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;default user_name&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#6F42C1;">Column</span><span style="color:#24292E;">({ type: </span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;">, length: </span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">user_pwd</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;default user_pwd&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="manager" tabindex="-1">manager <a class="header-anchor" href="#manager" aria-label="Permalink to &quot;manager&quot;">​</a></h2><h3 id="hasid" tabindex="-1">hasId <a class="header-anchor" href="#hasid" aria-label="Permalink to &quot;hasId&quot;">​</a></h3><ul><li>检查实例是否有 Id</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">hasId</span><span style="color:#E1E4E8;">(user);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">hasId</span><span style="color:#24292E;">(user);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="getid" tabindex="-1">getId <a class="header-anchor" href="#getid" aria-label="Permalink to &quot;getId&quot;">​</a></h3><ul><li>返回实例的 Id</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">getId</span><span style="color:#E1E4E8;">(user);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">getId</span><span style="color:#24292E;">(user);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="create" tabindex="-1">create <a class="header-anchor" href="#create" aria-label="Permalink to &quot;create&quot;">​</a></h3><ul><li>生成实例的另一种写法</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">(User); </span><span style="color:#6A737D;">// same as const user = new User();</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">(User, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  id: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  lastName: </span><span style="color:#9ECBFF;">&quot;Saw&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#6A737D;">// same as const user = new User(); user.firstName = &quot;Timber&quot;; user.lastName = &quot;Saw&quot;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">user</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">(User); </span><span style="color:#6A737D;">// same as const user = new User();</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">user</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">(User, {</span></span>
<span class="line"><span style="color:#24292E;">  id: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  lastName: </span><span style="color:#032F62;">&quot;Saw&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#6A737D;">// same as const user = new User(); user.firstName = &quot;Timber&quot;; user.lastName = &quot;Saw&quot;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="merge" tabindex="-1">merge <a class="header-anchor" href="#merge" aria-label="Permalink to &quot;merge&quot;">​</a></h3><ul><li>进行对象合并</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">manager.</span><span style="color:#B392F0;">merge</span><span style="color:#E1E4E8;">(User, user, { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> }, { lastName: </span><span style="color:#9ECBFF;">&quot;Saw&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#6A737D;">// same as user.firstName = &quot;Timber&quot;; user.lastName = &quot;Saw&quot;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">user</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">manager.</span><span style="color:#6F42C1;">merge</span><span style="color:#24292E;">(User, user, { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> }, { lastName: </span><span style="color:#032F62;">&quot;Saw&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#6A737D;">// same as user.firstName = &quot;Timber&quot;; user.lastName = &quot;Saw&quot;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="preload" tabindex="-1">preload <a class="header-anchor" href="#preload" aria-label="Permalink to &quot;preload&quot;">​</a></h3><h3 id="save" tabindex="-1">save <a class="header-anchor" href="#save" aria-label="Permalink to &quot;save&quot;">​</a></h3><ul><li>增 &amp; 改</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">save</span><span style="color:#E1E4E8;">(user);</span></span>
<span class="line"><span style="color:#E1E4E8;">user.user_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;xxx&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">save</span><span style="color:#E1E4E8;">([user]);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">save</span><span style="color:#24292E;">(user);</span></span>
<span class="line"><span style="color:#24292E;">user.user_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;xxx&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">save</span><span style="color:#24292E;">([user]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="remove" tabindex="-1">remove <a class="header-anchor" href="#remove" aria-label="Permalink to &quot;remove&quot;">​</a></h3><ul><li>移除</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(user);</span></span>
<span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">([user1, user2]);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(user);</span></span>
<span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">([user1, user2]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="insert" tabindex="-1">insert <a class="header-anchor" href="#insert" aria-label="Permalink to &quot;insert&quot;">​</a></h3><ul><li>增</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;">(User, { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;">, lastName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;">(User, [</span></span>
<span class="line"><span style="color:#E1E4E8;">  { firstName: </span><span style="color:#9ECBFF;">&quot;Foo&quot;</span><span style="color:#E1E4E8;">, lastName: </span><span style="color:#9ECBFF;">&quot;Bar&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  { firstName: </span><span style="color:#9ECBFF;">&quot;Rizz&quot;</span><span style="color:#E1E4E8;">, lastName: </span><span style="color:#9ECBFF;">&quot;Rak&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">]);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">insert</span><span style="color:#24292E;">(User, { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;">, lastName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">insert</span><span style="color:#24292E;">(User, [</span></span>
<span class="line"><span style="color:#24292E;">  { firstName: </span><span style="color:#032F62;">&quot;Foo&quot;</span><span style="color:#24292E;">, lastName: </span><span style="color:#032F62;">&quot;Bar&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">  { firstName: </span><span style="color:#032F62;">&quot;Rizz&quot;</span><span style="color:#24292E;">, lastName: </span><span style="color:#032F62;">&quot;Rak&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="update" tabindex="-1">update <a class="header-anchor" href="#update" aria-label="Permalink to &quot;update&quot;">​</a></h3><ul><li>改</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(User, { age: </span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;"> }, { category: </span><span style="color:#9ECBFF;">&quot;ADULT&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#6A737D;">// executes UPDATE user SET category = ADULT WHERE age = 18</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(User, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, { firstName: </span><span style="color:#9ECBFF;">&quot;Rizzrak&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#6A737D;">// executes UPDATE user SET firstName = Rizzrak WHERE id = 1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">update</span><span style="color:#24292E;">(User, { age: </span><span style="color:#005CC5;">18</span><span style="color:#24292E;"> }, { category: </span><span style="color:#032F62;">&quot;ADULT&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#6A737D;">// executes UPDATE user SET category = ADULT WHERE age = 18</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">update</span><span style="color:#24292E;">(User, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, { firstName: </span><span style="color:#032F62;">&quot;Rizzrak&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#6A737D;">// executes UPDATE user SET firstName = Rizzrak WHERE id = 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="delete" tabindex="-1">delete <a class="header-anchor" href="#delete" aria-label="Permalink to &quot;delete&quot;">​</a></h3><ul><li>删除</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">delete</span><span style="color:#E1E4E8;">(User, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">delete</span><span style="color:#E1E4E8;">(User, [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]);</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">delete</span><span style="color:#E1E4E8;">(User, { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> });</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">delete</span><span style="color:#24292E;">(User, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">delete</span><span style="color:#24292E;">(User, [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">]);</span></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">delete</span><span style="color:#24292E;">(User, { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="count" tabindex="-1">count <a class="header-anchor" href="#count" aria-label="Permalink to &quot;count&quot;">​</a></h3><ul><li>返回查询的总条数</li><li>入参同 find</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">count</span><span style="color:#E1E4E8;">(User, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  where: { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">count</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">count</span><span style="color:#24292E;">(User, {</span></span>
<span class="line"><span style="color:#24292E;">  where: { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="countby" tabindex="-1">countBy <a class="header-anchor" href="#countby" aria-label="Permalink to &quot;countBy&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">countBy</span><span style="color:#E1E4E8;">(User, { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> });</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">count</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">countBy</span><span style="color:#24292E;">(User, { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="find" tabindex="-1">find <a class="header-anchor" href="#find" aria-label="Permalink to &quot;find&quot;">​</a></h3><ul><li>查</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;">(User, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  where: [{ user_age: </span><span style="color:#B392F0;">MoreThanOrEqual</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;">) }, { user_name: </span><span style="color:#B392F0;">Like</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;%张%&quot;</span><span style="color:#E1E4E8;">) }],</span></span>
<span class="line"><span style="color:#E1E4E8;">  skip: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  take: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  order: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    user_age: </span><span style="color:#9ECBFF;">&quot;desc&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//倒序</span></span>
<span class="line"><span style="color:#E1E4E8;">    id: </span><span style="color:#9ECBFF;">&quot;asc&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  cache: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">find</span><span style="color:#24292E;">(User, {</span></span>
<span class="line"><span style="color:#24292E;">  where: [{ user_age: </span><span style="color:#6F42C1;">MoreThanOrEqual</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">18</span><span style="color:#24292E;">) }, { user_name: </span><span style="color:#6F42C1;">Like</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;%张%&quot;</span><span style="color:#24292E;">) }],</span></span>
<span class="line"><span style="color:#24292E;">  skip: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  take: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  order: {</span></span>
<span class="line"><span style="color:#24292E;">    user_age: </span><span style="color:#032F62;">&quot;desc&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//倒序</span></span>
<span class="line"><span style="color:#24292E;">    id: </span><span style="color:#032F62;">&quot;asc&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  cache: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="findby" tabindex="-1">findBy <a class="header-anchor" href="#findby" aria-label="Permalink to &quot;findBy&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">timbers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">findBy</span><span style="color:#E1E4E8;">(User, { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> });</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">timbers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">findBy</span><span style="color:#24292E;">(User, { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="findandcount" tabindex="-1">findAndCount <a class="header-anchor" href="#findandcount" aria-label="Permalink to &quot;findAndCount&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">timbers</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">timbersCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">findAndCount</span><span style="color:#E1E4E8;">(User, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  where: { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">timbers</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">timbersCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">findAndCount</span><span style="color:#24292E;">(User, {</span></span>
<span class="line"><span style="color:#24292E;">  where: { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="findone" tabindex="-1">findOne <a class="header-anchor" href="#findone" aria-label="Permalink to &quot;findOne&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">db.manager.</span><span style="color:#B392F0;">findOne</span><span style="color:#E1E4E8;">(User, { where: [{ user_name: </span><span style="color:#B392F0;">Like</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;张%&quot;</span><span style="color:#E1E4E8;">) }] });</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">db.manager.</span><span style="color:#6F42C1;">findOne</span><span style="color:#24292E;">(User, { where: [{ user_name: </span><span style="color:#6F42C1;">Like</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;张%&quot;</span><span style="color:#24292E;">) }] });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="findoneorfail" tabindex="-1">findOneOrFail <a class="header-anchor" href="#findoneorfail" aria-label="Permalink to &quot;findOneOrFail&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">timber</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">findOneOrFail</span><span style="color:#E1E4E8;">(User, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  where: { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">timber</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">findOneOrFail</span><span style="color:#24292E;">(User, {</span></span>
<span class="line"><span style="color:#24292E;">  where: { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="findonebyorfail" tabindex="-1">findOneByOrFail <a class="header-anchor" href="#findonebyorfail" aria-label="Permalink to &quot;findOneByOrFail&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">timber</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">findOneByOrFail</span><span style="color:#E1E4E8;">(User, { firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;"> });</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">timber</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">findOneByOrFail</span><span style="color:#24292E;">(User, { firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="findandcount-1" tabindex="-1">findAndCount <a class="header-anchor" href="#findandcount-1" aria-label="Permalink to &quot;findAndCount&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">timbers</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">timbersCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">findAndCount</span><span style="color:#E1E4E8;">(User, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  firstName: </span><span style="color:#9ECBFF;">&quot;Timber&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">timbers</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">timbersCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">findAndCount</span><span style="color:#24292E;">(User, {</span></span>
<span class="line"><span style="color:#24292E;">  firstName: </span><span style="color:#032F62;">&quot;Timber&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="clear" tabindex="-1">clear <a class="header-anchor" href="#clear" aria-label="Permalink to &quot;clear&quot;">​</a></h3><ul><li>清除表中所有数据</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> manager.</span><span style="color:#B392F0;">clear</span><span style="color:#E1E4E8;">(User);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> manager.</span><span style="color:#6F42C1;">clear</span><span style="color:#24292E;">(User);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,60),o=[e];function r(t,c,i,E,y,u){return a(),n("div",null,o)}const m=s(p,[["render",r]]);export{b as __pageData,m as default};
